<!DOCTYPE html>

<html>
  <head>
    <title>Applied Biocode Barcode Encoder/Decoder</title>

    <style>
		body {
			background-color: white;
		}
		
		/* Format the barcode number box */
		#barcode {
			font-size: x-large;
			width: 7ch;
			margin-top:	30px;
			text-align:	center;
			font-weight: bold;
		}

    </style>
  </head>

  <body>

    <div style="width:100%; height:100%; margin:0 auto">

      <div style="width:100%; height:100%; margin:0 auto; text-align:center">
        <h1>Applied Biocode Barcode Encoder/Decoder</h1>
        <h3>by Jeff Stevens</h3>
      </div>


      <div id="content" style="display:block; margin:0 auto;">

        <br /><br />

        <div id="svg" style="display:block; margin:0 auto">
          
		  <!-- Embed the SVG, to keep the document self-contained. -->
		  
          <svg id="bead" style="display:block; margin:0 auto"
             xmlns:dc="http://purl.org/dc/elements/1.1/"
             xmlns:cc="http://creativecommons.org/ns#"
             xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
             xmlns:svg="http://www.w3.org/2000/svg"
             xmlns="http://www.w3.org/2000/svg"
             xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
             xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
             width="68.5mm"
             height="40.5mm"
             viewBox="0 0 242.71654 143.50394"
             version="1.1"
             inkscape:version="0.91 r13725"
             sodipodi:docname="Bead barcode template.svg">
            <defs
               id="defs4" />
            <sodipodi:namedview
               id="base"
               pagecolor="#ffffff"
               bordercolor="#666666"
               borderopacity="1.0"
               inkscape:pageopacity="0.0"
               inkscape:pageshadow="2"
               inkscape:zoom="0.99999999"
               inkscape:cx="107.48634"
               inkscape:cy="80.201731"
               inkscape:document-units="mm"
               inkscape:current-layer="layer1"
               showgrid="false"
               fit-margin-top="0"
               fit-margin-left="0"
               fit-margin-right="0"
               fit-margin-bottom="0"
               inkscape:window-width="1280"
               inkscape:window-height="738"
               inkscape:window-x="-8"
               inkscape:window-y="-8"
               inkscape:window-maximized="1" />
            <metadata
               id="metadata7">
              <rdf:RDF>
                <cc:Work
                   rdf:about="">
                  <dc:format>image/svg+xml</dc:format>
                  <dc:type
                     rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
                  <dc:title />
                </cc:Work>
              </rdf:RDF>
            </metadata>
            <g
               inkscape:label="Layer 1"
               inkscape:groupmode="layer"
               id="layer1"
               transform="translate(-100.12942,-79.709632)">
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="rect4136"
                 width="240.94489"
                 height="141.73228"
                 x="101.01525"
                 y="80.595459" />
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="rect4138"
                 width="21.259842"
                 height="106.29921"
                 x="117.84595"
                 y="99.197823" />
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="rect4138-4"
                 width="21.259842"
                 height="106.29921"
                 x="302.09793"
                 y="99.197823" />
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="rect4138-5"
                 width="35.433071"
                 height="21.259842"
                 x="245.40501"
                 y="99.197823" />
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="rect4138-5-0"
                 width="21.259842"
                 height="21.259842"
                 x="160.36563"
                 y="141.71751" />
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="rect4138-5-0-6"
                 width="21.259842"
                 height="21.259842"
                 x="160.36563"
                 y="99.197823" />
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="rect4138-5-0-8"
                 width="21.259842"
                 height="21.259842"
                 x="202.88531"
                 y="184.2372" />
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="rect4138-5-0-8-3"
                 width="21.259842"
                 height="21.259842"
                 x="202.88531"
                 y="141.71751" />
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="rect4138-5-0-8-3-5"
                 width="21.259842"
                 height="21.259842"
                 x="202.88531"
                 y="99.197823" />
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="rect4138-5-0-8-7"
                 width="21.259842"
                 height="21.259842"
                 x="245.40501"
                 y="184.2372" />
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="rect4138-5-0-8-7-4"
                 width="21.259842"
                 height="21.259842"
                 x="245.40501"
                 y="141.71751" />
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="rect4138-5-0-8-7-4-7"
                 width="21.259842"
                 height="21.259842"
                 x="160.36565"
                 y="184.2372" />
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:0;fill-rule:nonzero;stroke:none;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="barcode-0"
                 width="21.259842"
                 height="21.259842"
                 x="181.62547"
                 y="99.197823"
                 inkscape:label="barcode-0" />
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:0;fill-rule:nonzero;stroke:none;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="barcode-1"
                 width="21.259842"
                 height="21.259842"
                 x="224.14516"
                 y="99.197823"
                 inkscape:label="barcode-1" />
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:0;fill-rule:nonzero;stroke:none;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="barcode-2"
                 width="21.259842"
                 height="21.259842"
                 x="160.36563"
                 y="120.45766"
                 inkscape:label="barcode-2" />
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:0;fill-rule:nonzero;stroke:none;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="barcode-3"
                 width="21.259842"
                 height="21.259842"
                 x="202.88531"
                 y="120.45766"
                 inkscape:label="barcode-3" />
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:0;fill-rule:nonzero;stroke:none;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="barcode-4"
                 width="21.259842"
                 height="21.259842"
                 x="245.40501"
                 y="120.45766"
                 inkscape:label="barcode-4" />
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:0;fill-rule:nonzero;stroke:none;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="barcode-5"
                 width="21.259842"
                 height="21.259842"
                 x="181.62547"
                 y="141.71751"
                 inkscape:label="barcode-5" />
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:0;fill-rule:nonzero;stroke:none;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="barcode-6"
                 width="21.259842"
                 height="21.259842"
                 x="224.14516"
                 y="141.71751"
                 inkscape:label="barcode-6" />
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:0;fill-rule:nonzero;stroke:none;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="barcode-7"
                 width="21.259842"
                 height="21.259842"
                 x="160.36563"
                 y="162.97736"
                 inkscape:label="barcode-7" />
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:0;fill-rule:nonzero;stroke:none;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="barcode-8"
                 width="21.259842"
                 height="21.259842"
                 x="202.88531"
                 y="162.97736"
                 inkscape:label="barcode-8" />
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:0;fill-rule:nonzero;stroke:none;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="barcode-9"
                 width="21.259842"
                 height="21.259842"
                 x="245.40501"
                 y="162.97736"
                 inkscape:label="barcode-9" />
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:0;fill-rule:nonzero;stroke:none;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="barcode-10"
                 width="21.259842"
                 height="21.259842"
                 x="181.62547"
                 y="184.2372"
                 inkscape:label="barcode-10" />
              <rect
                 style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:0;fill-rule:nonzero;stroke:none;stroke-width:1.77165353;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate"
                 id="barcode-11"
                 width="21.259842"
                 height="21.259842"
                 x="224.14516"
                 y="184.2372"
                 inkscape:label="barcode-11" />
            </g>
          </svg>
          

        </div>


		<!-- Display the barcode number box -->
		
        <div style="display:block; margin:0 auto">
          <form style="text-align:center" onsubmit="updateBarcode(); return false;">
		  
            <input type="number" id="barcode" name="barcode"
              min="0" max="4095" step="1" value="0"
              oninput="updateBarcode(); return false;">
			  
          </form>
        </div>

      </div>

    </div>


    <script>

      // Get the bit value of a barcode box
      function getBit(bit) {

        var box = document.getElementById("barcode-" + bit);
        var opacity = box.style["fill-opacity"];
        var val;

        if (opacity == "0") {
          val = 0;
        } else if (opacity == "255") {
          val = 1;
        }

        return val;
      }


      // Set or unset a barcode box
      function setBit(bit, val) {

        var box = document.getElementById("barcode-" + bit);

        if (val == 0) {
          box.style["fill-opacity"] = "0";
        } else if (val == 1) {
          box.style["fill-opacity"] = "255";
        } else {
          throw "'val' must be 0 or 1."
        }

      }


      function getBarcode() {

        var val = 0;
        var barcode = 0;

        for (var bit = 0; bit < 12; bit++) {

          // Need to count down here!
          val = getBit(11 - bit);

          barcode = barcode << 1;
          barcode = barcode | val;
        }

        return barcode;
      }


      function setBarcode(barcode) {

        var val;

        for (var bit = 0; bit < 12; bit++) {

          val = barcode & 1;
          setBit(bit, val);

          barcode = barcode >> 1;
        }
      }


      function updateBarcode() {
        // Get the input value
        var input = document.getElementById("barcode");
        var barcode = input.value;

        if (barcode !== null && !isNaN(barcode) &&
          /^([0-9]{1,3}|[0-3][0-9]{3}|40[0-8][0-9]|409[0-5])$/.test(barcode) ) {
          input.style["color"] = "black";
          setBarcode(barcode);
        } else {
          input.style["color"] = "red";
          setBarcode(0);
        }
      }


      function toggleBox() {

        // First, toggle the state
        var state = this.style["fill-opacity"];
        if (state == "0") {
          this.style["fill-opacity"] = "255";
        } else if (state == "255") {
          this.style["fill-opacity"] = "0";
        }

        // Now, update the barcode value
        var barcode = getBarcode();
        document.getElementById("barcode").value = barcode;
        updateBarcode();
      }


      function initialize() {

        var box;
        for (var i = 0; i < 12; i++) {
          box = document.getElementById("barcode-" + i);

          // Add the click handler
          box.addEventListener("click", toggleBox);

          // Change the cursor when over a box
          box.style["cursor"] = "pointer";
          box.style["cursor"] = "hand";
        }

      }


      initialize();


    </script>

  </body>

</html>
